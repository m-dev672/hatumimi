schemaVersion: 2.2.0
metadata:
  name: tugidoko
components:
  - name: devtools
    container:
      image: quay.io/devfile/universal-developer-image:latest
      endpoints:
        - name: dev-server
          exposure: public
          protocol: http
          secure: true
          targetPort: 5174

commands:
  - id: server-start
    exec:
      component: devtools
      commandLine: |
        . $NVM_DIR/nvm.sh && nvm install && nvm use && cd /projects/tugidoko && npm install &&
        export VITE_HTTPS="false" && export VITE_DOMAIN="${CHE_DASHBOARD_URL/https:\/\/dashboard/}" && npm run dev